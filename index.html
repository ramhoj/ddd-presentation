<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Design at the Center</title>

  <!-- Teamtailor fonts: Inter -->
  <link rel="preconnect" href="https://rsms.me/">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

  <!-- Prism.js for syntax highlighting -->
  <link rel="stylesheet" href="prism-theme.css">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="presentation">

    <!-- ================================================================
         Title
         ================================================================ -->
    <section class="slide slide--gradient" id="title">
      <div class="slide-inner">
        <h1 class="slide-title slide-title--large">The Domain<br>at the Center</h1>
        <p class="slide-subtitle">Lessons from 37signals on writing maintainable code that is easy to reason about and beautful to read.</p>
      </div>

      <nav class="slide-nav">
        <span class="nav-disabled">â†</span>
        <a href="#about-me" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         About Me
         ================================================================ -->
    <section class="slide slide--dark" id="about-me">
      <div class="slide-inner">
        <div class="about-layout">
          <div class="about-text">
            <h2 class="slide-title">Nicklas RamhÃ¶j Holtryd</h2>
            <p class="about-bio">
              I'm a developer at <strong>Teamtailor</strong>, based in Gothenburg, Sweden.
              Prior to joining Teamtailor, I spent three years at <strong>37signals</strong> working
              on <strong>Basecamp</strong> and <strong>HEY</strong>â€”where I picked up some ideas about code design that
              I'd like to share with you today.
            </p>
          </div>
          <img src="profile-photo-cropped-3.jpeg" alt="Nicklas RamhÃ¶j Holtryd" class="profile-photo">
        </div>
      </div>

      <nav class="slide-nav">
        <a href="#title" class="nav-link">â†</a>
        <a href="#what-is-ddd" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         What is DDD?
         ================================================================ -->
    <section class="slide slide--dark" id="what-is-ddd">
      <div class="slide-inner">
        <h2 class="slide-title">Domain-Driven Design</h2>
        <p class="slide-subtitle" style="margin-bottom: 2.5rem;">A philosophy for structuring complex software, coined by Eric Evans in 2003</p>

        <div class="ddd-principles">
          <div class="ddd-principle">
            <span class="ddd-principle-icon">ğŸ’¬</span>
            <h3>Ubiquitous Language</h3>
            <p>Code uses the same terms as the business. If users "gild" a card, the code says <code>card.gild</code>.</p>
          </div>

          <div class="ddd-principle">
            <span class="ddd-principle-icon">ğŸ§ </span>
            <h3>Rich Domain Models</h3>
            <p>Models contain behavior, not just data. They represent real business concepts.</p>
          </div>

          <div class="ddd-principle">
            <span class="ddd-principle-icon">ğŸ¯</span>
            <h3>Domain at the Center</h3>
            <p>Everything elseâ€”controllers, jobs, APIsâ€”orchestrates the domain. The domain is the core.</p>
          </div>
        </div>
      </div>

      <nav class="slide-nav">
        <a href="#about-me" class="nav-link">â†</a>
        <a href="#quote-essence" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Quote: Essence
         ================================================================ -->
    <section class="slide slide--pattern" id="quote-essence">
      <div class="slide-inner">
        <div class="quote">
          <p class="quote-text">We care about reducing solutions to their essence.</p>
          <p class="quote-author">Jorge Manrubia, 37signals</p>
        </div>
      </div>

      <nav class="slide-nav">
        <a href="#what-is-ddd" class="nav-link">â†</a>
        <a href="#domain-center" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Domain at the Center (Epicenter Philosophy)
         ================================================================ -->
    <section class="slide slide--dark" id="domain-center">
      <div class="slide-inner">
        <h2 class="slide-title">Rich domain objects</h2>

        <p class="slide-text" style="margin-bottom: 2rem;">
          In ShapeUp we start with the epicenter and work our way out.<br>
          We can apply the same philosophy to code organization.
        </p>

        <div class="diagram">
          <div class="diagram-box">Concerns</div>
          <span class="diagram-arrow">â†’</span>
          <div class="diagram-box diagram-box--primary">Domain Model</div>
          <span class="diagram-arrow">â†</span>
          <div class="diagram-box">Concerns</div>
        </div>

        <p class="slide-text">
          The domain model defines the epicenterâ€”the <em>behaviors and nouns</em> of your business.<br>
          Roles and traits extend outward as concern modules.
        </p>
      </div>

      <nav class="slide-nav">
        <a href="#quote-essence" class="nav-link">â†</a>
        <a href="#quote-service-objects" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Quote: Service Objects
         ================================================================ -->
    <section class="slide slide--pattern" id="quote-service-objects">
      <div class="slide-inner">
        <div class="quote">
          <p class="quote-text">Service objects are not meant to implement your business knowledge. They are meant to orchestrate your domain objects.</p>
          <p class="quote-author">Jorge Manrubia</p>
        </div>
      </div>

      <nav class="slide-nav">
        <a href="#domain-center" class="nav-link">â†</a>
        <a href="#code-card-model" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Code: Card Model
         ================================================================ -->
    <section class="slide slide--dark" id="code-card-model">
      <div class="slide-inner">
        <h2 class="slide-title">Rich, coherent domain objects</h2>

        <div class="code-container">
          <span class="code-filename">app/models/card.rb</span>
          <pre class="code-block"><code class="language-ruby">class Card < ApplicationRecord
  include Assignable, Closeable, Golden, Postponable,
    Searchable, Taggable, Watchable

  belongs_to :board
  belongs_to :creator, class_name: "User"

  has_many :comments, dependent: :destroy
  has_rich_text :description

  scope :golden, -> { joins(:goldness) }
  scope :latest, -> { order(last_active_at: :desc) }
end</code></pre>
        </div>

        <p class="slide-text">
          Concerns organize traits and roles. The model stays readable and coherent.
        </p>
      </div>

      <nav class="slide-nav">
        <a href="#quote-service-objects" class="nav-link">â†</a>
        <a href="#code-concern" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Code: Concern Example
         ================================================================ -->
    <section class="slide slide--dark" id="code-concern">
      <div class="slide-inner">
        <h2 class="slide-title">Traits as concerns</h2>

        <div class="code-container">
          <span class="code-filename">app/models/card/golden.rb</span>
          <pre class="code-block"><code class="language-ruby">module Card::Golden
  extend ActiveSupport::Concern

  included do
    has_one :goldness, dependent: :destroy
    scope :golden, -> { joins(:goldness) }
  end

  def golden?
    goldness.present?
  end

  def gild
    create_goldness! unless golden?
  end

  def ungild
    goldness&.destroy
  end
end</code></pre>
        </div>

        <p class="slide-text">
          Semantic method names: <code>gild</code> and <code>ungild</code>, not <code>call</code>.
        </p>
      </div>

      <nav class="slide-nav">
        <a href="#code-card-model" class="nav-link">â†</a>
        <a href="#code-controller" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Code: Controller
         ================================================================ -->
    <section class="slide slide--dark" id="code-controller">
      <div class="slide-inner">
        <h2 class="slide-title">Controllers orchestrate</h2>

        <div class="code-container">
          <span class="code-filename">app/controllers/signups_controller.rb</span>
          <pre class="code-block"><code class="language-ruby">class SignupsController < ApplicationController
  def new
    @signup = Signup.new
  end

  def create
    signup = Signup.new(signup_params)

    if signup.valid?(:identity_creation)
      redirect_to_session_magic_link signup.create_identity
    else
      head :unprocessable_entity
    end
  end
end</code></pre>
        </div>

        <p class="slide-text">
          The controller connects domain objects with the external world.<br>
          This <em>is</em> the role of a service objectâ€”we just don't need a separate class.
        </p>
      </div>

      <nav class="slide-nav">
        <a href="#code-concern" class="nav-link">â†</a>
        <a href="#code-plain-ruby" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Code: Plain Ruby Object
         ================================================================ -->
    <section class="slide slide--dark" id="code-plain-ruby">
      <div class="slide-inner">
        <h2 class="slide-title">Plain Ruby objects as domain models</h2>

        <div class="code-container">
          <span class="code-filename">app/models/signup.rb</span>
          <pre class="code-block"><code class="language-ruby">class Signup
  include ActiveModel::Model
  include ActiveModel::Validations

  attr_accessor :full_name, :email_address, :identity

  validates :email_address, format: { with: URI::MailTo::EMAIL_REGEXP },
    on: :identity_creation
  validates :full_name, :identity, presence: true, on: :completion

  def create_identity
    @identity = Identity.find_or_create_by!(email_address: email_address)
    @identity.send_magic_link for: :sign_up
  end

  def complete
    valid?(:completion) && create_account
  end
end</code></pre>
        </div>

        <p class="slide-text">
          ActiveModel without persistence. A first-class domain object.
        </p>
      </div>

      <nav class="slide-nav">
        <a href="#code-controller" class="nav-link">â†</a>
        <a href="#takeaways" class="nav-link">â†’</a>
      </nav>
    </section>

    <!-- ================================================================
         Key Takeaways
         ================================================================ -->
    <section class="slide slide--gradient" id="takeaways">
      <div class="slide-inner">
        <h2 class="slide-title">Key Takeaways</h2>

        <ul class="takeaways">
          <li>Place the domain model at the center of your architecture</li>
          <li>Service objects orchestrateâ€”they don't hold business logic</li>
          <li>Use concerns to organize traits and roles naturally</li>
          <li>Prefer semantic names over generic patterns like <code>call</code></li>
          <li>Plain Ruby objects + ActiveModel work beautifully</li>
          <li>Prioritize what's coherent for humans over theoretical purity</li>
        </ul>

        <p class="slide-text" style="margin-top: 2rem; color: var(--tt-grey-43);">
          These are suggestions offered humblyâ€”not mandates.<br>
          What matters is code that's easy to understand and maintain.
        </p>
      </div>

      <nav class="slide-nav">
        <a href="#epicenter" class="nav-link">â†</a>
        <span class="nav-disabled">â†’</span>
      </nav>
    </section>

  </div>

  <!-- Prism.js for syntax highlighting -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-ruby.min.js"></script>

  <!-- Keyboard navigation -->
  <script src="keyboard.js"></script>
</body>
</html>
